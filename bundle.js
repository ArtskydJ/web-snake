!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.startGame=t()}}(function(){return function t(e,n,o){function r(a,c){if(!n[a]){if(!e[a]){var f="function"==typeof require&&require;if(!c&&f)return f(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};e[a][0].call(d.exports,function(t){var n=e[a][1][t];return r(n?n:t)},d,d.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){function o(t){d.clearRect(0,0,t.width*c.width,t.height*c.height)}function r(t,e,n){d.fillStyle=n,d.fillRect(t*c.width,e*c.height,c.width,c.height)}function i(){u.width=u.clientWidth,u.height=u.clientHeight,d.fillStyle="#eee",d.fillRect(0,0,u.width,u.height);const t={width:Math.floor(u.width/c.width),height:Math.floor(u.height/c.height)};return o(t),{updateCanvas:a,board:t}}function a(t,e,n){o(t),r(n[0],n[1],"green"),e.forEach(function(t,n){var o=Math.round((-n+(e.length-1)/2)*f),i=Math.max(255+Math.min(0,o),50),a=Math.min(Math.max(0,o),205),c=("0"+a.toString(16)).slice(-2),u=("0"+i.toString(16)).slice(-2);r(t[0],t[1],"#"+c+c+u)})}const c={width:50,height:50},f=3;var u=document.getElementById("canvas"),d=u.getContext("2d");e.exports=i},{}],2:[function(t,e,n){var o,r=.5;e.exports=function(t){clearInterval(o),o=setInterval(function(){if(navigator&&navigator.getGamepads){var e=navigator.getGamepads()[0];if(e){var n=e.axes[0],o=e.axes[1],i=Math.abs(n)>Math.abs(o);i&&n>r&&t("right"),i&&n<-r&&t("left"),!i&&o>r&&t("down"),!i&&o<-r&&t("up")}}},10)}},{}],3:[function(t,e,n){var o={ArrowUp:"up",ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down",KeyW:"up",KeyA:"left",KeyS:"down",KeyD:"right",KeyI:"up",KeyJ:"left",KeyK:"down",KeyL:"right",Numpad8:"up",Numpad4:"left",Numpad6:"right",Numpad5:"down",Numpad2:"down"};e.exports=function(t){window.onkeydown=function(e){t(o[e.code])}}},{}],4:[function(t,e,n){var o=.25;e.exports=function(t){canvas.onmousedown=function(e){var n=e.clientX/canvas.clientWidth*2-1,r=e.clientY/canvas.clientHeight*2-1,i=Math.abs(n)>Math.abs(r);i&&n>o&&t("right"),i&&n<-o&&t("left"),!i&&r>o&&t("down"),!i&&r<-o&&t("up")}}},{}],5:[function(t,e,n){function o(t){for(var e=[],n=0;n<t;n++)e.push([n,0]);return e}function r(t,e,n){return t.slice(1).some(function(t){return t[0]===e&&t[1]===n})}function i(t,e){do var n=Math.floor(Math.random()*t.width),o=Math.floor(Math.random()*t.height);while(r(e,n,o));return[n,o]}function a(t,e){for(var n=0;n<e;n++)t.unshift(t[0])}function c(t,e){var n=e.snake.slice(),o=e.food.slice(),c=e.nextDirections.slice(),f=e.delayMs,u=c.shift()||e.currentDirection,d={left:-1,right:1}[u]||0,s={up:-1,down:1}[u]||0,h=n[n.length-1][0]+d,l=n[n.length-1][1]+s;return h<0||h>=t.board.width||l<0||l>=t.board.height||r(n,h,l)?{dead:!0}:(n.shift(),n.push([h,l]),o[0]===h&&o[1]===l&&(a(n,t.growAmount),f/=t.accelerate,o=i(t.board,n)),{snake:n,food:o,currentDirection:u,nextDirections:c,delayMs:f,dead:!1})}function f(t){var e={left:["up","down"],right:["up","down"],up:["left","right"],down:["left","right"]};return function(n){var o=t.nextDirections[t.nextDirections.length-1]||t.currentDirection,r=e[o],i=r.indexOf(n)!==-1;i&&t.nextDirections.push(n)}}var u=t("./canvas.js"),d=t("./controls/keyboard.js"),s=t("./controls/gamepad.js"),h=t("./controls/tap.js"),l=null;e.exports=function(t){function e(){clearTimeout(l),r(t.board,p.snake,p.food);var n=f(p);d(n),s(n),h(n),l=setTimeout(function(){p=c(t,p),p.dead||e()},p.delayMs)}if(!t||"object"!=typeof t)throw new Error("Expected constants to be an object");if("number"!=typeof t.initialLength)throw new Error("Expected constants.initialLength to be a number");if("number"!=typeof t.initialDelayMs)throw new Error("Expected constants.initialDelayMs to be a number");if("number"!=typeof t.growAmount)throw new Error("Expected constants.growAmount to be a number");if("number"!=typeof t.accelerate)throw new Error("Expected constants.accelerate to be a number");var n=u(),r=n.updateCanvas;t.board=n.board;var a=o(t.initialLength),p={snake:a,food:i(t.board,a),currentDirection:"right",nextDirections:[],delayMs:t.initialDelayMs,dead:!1};e()}},{"./canvas.js":1,"./controls/gamepad.js":2,"./controls/keyboard.js":3,"./controls/tap.js":4}]},{},[5])(5)});